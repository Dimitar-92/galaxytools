<tool id="fornac" name="Fornac image generation" version="0.1.0">
  <description>for RNA sequences in a file.</description>
  <requirements>
  	<requirement type="package" version="4.4.1">nodejs</requirement>
  </requirements>
 <command>
      <![CDATA[
      		  npm jsdom fs pn/fs svg2png --prefix=. &&
            node server.js $format $width $height $input $output $__tool_directory__/
      ]]>
  </command>
  <inputs>
    <param name="format" type="select" label="Select the Format to output(svg or png):">
      <option value="svg" selected="True">SVG</option>
      <option value="png">PNG</option>
      <option value="html">HTML</option>
    </param>
    <param name="width" type="text" label="Width(in pixels):" value="600" />
    <param name="height" type="text" label="Height(in pixels):" value="600" />
    <param format="json" name="input" type="data" label="Source file:"/>
  </inputs>
  <outputs>
    <data format="svg" name="output">
      <change_format>
          <when input="format" value="png" format="png" />
          <when input="format" value="html" format="html" />
      </change_format>
      <discover_datasets pattern="__designation_and_ext__" visible="true" />
    </data>
  </outputs>
  <tests>
    <test>
      <param name="format" value="svg" />
      <param name ="width" value="600" />
      <param name ="height" value="600" />
      <param name="input" value="input.json" ftype="json" />
      <output name="output" file="test.svg" ftype="svg"/>
    </test>
    <test>
      <param name="format" value="html" />
      <param name ="width" value="600" />
      <param name ="height" value="600" />
      <param name="input" value="input.json" ftype="json" />
      <output name="output" file="test.html" ftype="html" />
    </test>
    <test>
      <param name="format" value="png" />
      <param name ="width" value="600" />
      <param name ="height" value="600" />
      <param name="input" value="input.json" ftype="json" />
      <output name="output" file="test.png" ftype="png" />
    </test>
  </tests>
  <help>
This tool displays a secondary structure on the web.
  </help>
  <citations>
    <citation type="doi">10.1093/bioinformatics/btq281</citation>
  </citations>

</tool>
